# Продолжаем

1. Raid массивы, что такое икакие бывают
2. Добавьте в виртуальную машину 2 диска отформатируйте их в ext4
3. Создайте из них raid 0 массив
4. Проверье всё ли работает
5. Удалите raid0 и создайте raid1
6. В чём между ними разница?
7. Есть ли файловые системы которые поддерживают raid массивы без стороненго ПО
8. Можно ли создать raid массив во время установки системы?


Ответ:

1. Raid массивы, что такое и какие бывают
Raid - технология, позволяющая объединить несколько физических дисков в один массив, повышающий общую производительность, сохраняя данные при повреждении одного из дисков (разные версии могут сочетать свойства)
Raid 0 - делит данные между дисками, увеличивая производительность, но при повреждении одного из дисков теряет все данные
Raid 1 - создает резеврную на втором диске. Повышает отказоустойчивость, но требует х2 памяти
Raid 5 - использует один из дисков для хранения контрольной суммы. Можно потерять один из дисков без потери данных
Raid 6 - как Raid 5, но 2 диска для хранения контрольной суммы
Raid 10 - Raid 1 + Raid 0 (требует минимум 4 диска)

2. Добавьте в виртуальную машину 2 диска отформатируйте их в ext4
sudo mkfs.ext4 /dev/sdb
sudo mkfs.ext4 /dev/sdc
sdb и sdc - 2 диска

После проверка: sudo blkid

3. Создайте из них raid 0 массив
Для начала установить mdadm
sudo apt-get install mdadm

После создаем из них массив
sudo mdadm --create --verbose /dev/md0 --level=0 --raid-devices=2 /dev/sdb /dev/sdc # --level=0 — указывает RAID 0; --raid-devices=2 — количество дисков в массиве

Далее нужно создать точку монтирования:
sudo mkdir /mnt/raid0
sudo mount /dev/md0 /mnt/raid0

И добавляем в fstab для автоматического монтирования:
vim /etc/fstab
/dev/md0   /mnt/raid0   ext4   defaults   0   2

4. Проверьте всё ли работает
Проверка: cat /proc/mdstat

5. Удалите raid0 и создайте raid1
sudo umount /dev/md0      # Отмонтируем Raid 0 массив
sudo mdadm --stop /dev/md0  # Остановим массив
sudo mdadm --remove /dev/md0  # Удалим его

sudo mdadm --create --verbose /dev/md1 --level=1 --raid-devices=2 /dev/sdb /dev/sdc # Создаем новый Raid 1 массив

После чего отформатируем и примонтируем:
sudo mkfs.ext4 /dev/md1
sudo mkdir /mnt/raid1
sudo mount /dev/md1 /mnt/raid1
vim /etc/fstab
/dev/md1   /mnt/raid1   ext4   defaults   0   2

6. В чём между ними разница?
Описаны в пункте 1

7. Есть ли файловые системы которые поддерживают raid массивы без стороненго ПО
Да, Btrfs, ZFS

8. Можно ли создать raid массив во время установки системы?
Да, с помощью ручной настройки дисков