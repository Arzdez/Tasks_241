# Настраиваем

**1) Какой по умолчанию используется порт для подключения?**

22

**2) Можно ли его изменить? Если да, то как?**

1. Открываем конфиг ssh:

```sh
nano /etc/ssh/ssh_config
```

2. Находим строчку: Port 22
3. Меняем ее на нужный порт.

![image](https://github.com/user-attachments/assets/de3bd3a0-d242-406c-9dc1-4483c7fcbb9e)

4. Перезагружаем службу sshd:

```sh
systemctl restart sshd
```

**3) Какая служба отвечает за обработку запросов на подключения по ssh?**

sshd

**4) Какой файл конфигурации отвечает за его настройку?**

/etc/ssh/ssh_config

**5) Попробуйте подключиться по ssh к предоставленному вам серверу.**

Попробовали

**6) Отредактируйте файл настроек на сервере так, чтобы была возможность подключиться к серверу используя пользователя root.**

В файле /etc/ssh/ssh_config редактируем строчку:

```sh
PermitRootLogin [параметр]
```

Параметры, которые можно указать:

- yes - разрешает подключение по ssh через root.
- prohibit-password - вход по паролю и интерактивная аутентификация с клавиатуры отключены для пользователя root.
- forced-commands-only - вход root с аутентификацией по публичному ключу будет разрешён, но только если была указана опция ForceCommand с командой.
- no - запрещает подключение по ssh через root.

**7) Измените количество ошибок ввода пароля перед сбросом соединения, покажите эти измененения.**

В файле /etc/ssh/ssh_config редактируем строчку:
```sh
MaxAuthTries 3
```

**8) Создайте пользователя ssh-user и попробуйте им подключиться к серверу.**

```sh
useradd -p [password] ssh-user
```

![image](https://github.com/user-attachments/assets/b77125f7-2f5a-446d-b914-80924aa53e51)


**9) Ограничьте ему возможность подключения к серверу.**

```
DenyUsers ssh-user
```

**10) Как вы это сделали?**

Снова редактировали файл /etc/ssh/ssh_config. Строчка DenyUsers позволяет запретить вход конкретным пользователям, перечисленным через пробел.

**11) Что хранится в файле known_hosts?**

В SSH для аутентификации компьютеров и пользователей используется криптография с открытым ключом. Ключи хоста аутентифицируют хосты. Уполномоченные ключи и ключи идентификации аутентифицируют пользователей. В OpenSSH коллекция известных ключей хостов хранится в /etc/ssh/known_hosts и в .ssh/known_hosts в домашнем каталоге каждого пользователя. При первом подключении к хосту ssh обычно добавляет открытый ключ удаленного хоста в файл known_hosts пользователя.
