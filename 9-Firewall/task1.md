# Открываем iptables

**1) Установите iptables**

```sh
apt-get install iptables
```

**2) Проверьте осталась ли возможность подключения по ssh к вашему серверу.**

Такая возможность пропала:

![image](https://github.com/user-attachments/assets/3a352421-7bbe-403f-a887-1a2c741701d1)


**3) Почему может пропасть такая возможность?**

Это произошло из-за блокировки порта 22 (или любого другого, указанного в конфиге ssh), так как iptables начала работу после установки.

**4) Откройте нужный порт на сервере чтобы восстановить подключение**

```sh
iptables -A INPUT -p tcp --dport 22 -j ACCEPT
```

**5) Это будет udp или tcp порт?**

ssh использует TCP, так как это протокол с установленным соединением.

# Сохраняем

**6) Сохраняются ли записанные вами правила после перезагрузки?**

iptables не сохраняет правила автоматически после перезагрузки, поэтому их необходимо сохранять.

**7) Как их сохранить?**

```sh
iptables-save > /etc/iptables/rules.v4
```

При работе с firewall не рекомендую отключаться от текущей сессии ssh. Лучше подключаться из другой консольки.
