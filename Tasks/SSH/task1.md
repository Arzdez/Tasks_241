# Настраиваем
## 1. Какой по умолчанию используется порт для подключения?
По умолчанию SSH-сервис использует порт **22** для установления соединений.
## 2. Можно ли его изменить? Если да то как?
Да, порт по умолчанию можно изменить. Для этого необходимо отредактировать конфигурационный файл SSH-сервера.
## 3. Какая служба отвечает за обработку запросов на подключения по SSH?
Службой, отвечающей за обработку SSH-подключений, является sshd (SSH Daemon).
## 4. Какой файл конфигурации отвечает за его настройку?
Конфигурационный файл SSH-сервера находится по пути: /etc/openssh/sshd_config
## 5. Попробуйте подключиться по ssh к предоставленному вам серверу.
```bash
ssh student@arzdez.ru -p 234
```
## 6. Отредактируйте файл настроек на сервере так, чтобы была возможность подключиться к серверу используя пользователя root.
```bash
vim /etc/openssh/sshd_config
```
Надо изменить строчку которая начинается на PermitRootLogin на:
```ini
PermitRootLogin prohibit-password
```
```bash
systemctl restart sshd
```
## 7. Измените количество ошибок ввода пароля перед сборосом соединения, покажите эти измененения.
```bash
vim /etc/openssh/sshd_config
```
Надо изменить строчку которая начинается на MaxAuthTries на:
```ini
MaxAuthTries 3
```
```bash
systemctl restart sshd
```
## 8. Создайте пользователя ssh-user и попробуйте им подключиться к серверу.
```bash
adduser ssh-user
```
```bash
passwd ssh-user
```
```bash
ssh ssh-user@arzdez.ru -p 234
```
## 9. Ограничьте ему возможность подключения к серверу.
```bash
vim /etc/openssh/sshd_config
```
Надо добавить строчку:
```ini
DenyUsers ssh-user
```
```bash
systemctl restart sshd
```
## 10. Как вы это сделали?
Ограничение было реализовано путем добавления пользователя `ssh-user` в параметр `DenyUsers` в файле `/etc/ssh/sshd_config`. Это запрещает указанному пользователю аутентифицироваться через SSH.
## 11. Что хранится в файле known_hosts?
Файл `known_hosts`, расположенный в директории `~/.ssh/` на клиентской машине, хранит список известных серверов и их открытые SSH-ключи. При первом подключении к новому серверу SSH-клиент сохраняет его ключ в этот файл. При последующих подключениях клиент проверяет соответствие ключа, чтобы убедиться, что подключается к тому же серверу, и предотвратить атаки типа «человек посередине».
