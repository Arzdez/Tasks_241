# Написание пользовательских юнитов
Создадим файл в домашнем каталоге командой `touch script`.
Изменим права доступа к файлу, чтобы его можно было выполнить, командой `chmod +x script`.
Теперь откроем данный файл текстовым редактором, например `nano script`.
Далее разместим в файле следующий код:
```bash
#!/bin/bash
set -euo pipefail

# Создание папки и перемещение в нее
cd
if ! [ -d info ]; then
  mkdir info
  cd info
else
  echo "Папка 'info' уже существует"
  exit
fi

# Создание первого файла и сохранение текущей даты в него
date > 1

# Создание второго файла и сохранение версии ядра в него
uname -r > 2

# Создание третьего файла и сохранение имени компьютера в него
uname -n > 3

# Создание четвертого файла и сохранение списка всех файлов
# в домашнем каталоге пользователя, от которого выполняется скрипт
cd
files="$(ls -lA)"
cd info
echo "$files" > 4
```

## Создание юнита
Создадим файл в каталоге, в котором обычно хранятся пользователськие юниты, командой `touch /etc/systemd/system/script.service`.
Теперь откроем данный файл текстовым редактором, например `nano`.
Далее разместим в файле следующий код:
```
[Unit]
Description=SomeService

[Service]
Type=forking
ExecStart=/bin/bash /usr/local/bin/script

[Install]
WantedBy=multi-user.target
```
В секции **[Unit]** описывается, что это за юнит. В данном случае здесь содержится только описания юнита.

В секции **[Service]** указывается какими командами и под каким пользователем должен запускаться сервис.
Переменной `Type` присваивается значение `forking`. В таком случае systemd предполагает,
что служба запускается однократно и процесс разветвляется с завершением родительского процесса.
Данный тип используется для запуска классических демонов.
Переменной `ExecStart` присваивается значение, указывающее полный путь к скрипту, который необходимо запустить.

В секции **[Install]** описывается, на каком уровне запуска должен стартовать сервис.
Переменной `WantedBy` присваивается значение `multi-user.target`, что соответствует третьему уровню запуска системы:
"Многопользовательский режим без графики".
